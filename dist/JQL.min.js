!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.JQL=e()}(this,function(){var t=["~","~~","=","==","===","!=","!==","<",">","<=",">="].map(function(t){return"\\"+t}).join("|");const u=["&&","||"].map(function(t){return"\\"+t}).join("|"),l=`(\\w+) (${t}) (\\w+)`;function a(t){if(!(t&&t instanceof Array))throw new Error("JQL: Data is invalid or is not a valid array");return this.items=t,this.length=t.length,this.select=e,this.where=n,this.data=r,this.array=r,this.result=r,this.count=s,this.log=c,this.table=h,this.dir=o,this}function i(t,e){if(!t&&"string"!=typeof t||!e)return!1;let n,i=[];const r=new RegExp(`(?:${l})*(${u})*`,"gm");for(;n=r.exec(t);)n.index===r.lastIndex&&r.lastIndex++,n[0]&&i.push(n[0]);let s=[];for(let t=0;t<i.length;t++){var o=i[t];2<o.length&&(o=function(t,e){let n,i=[];const r=new RegExp(l,"gm");for(;null!==(n=r.exec(t));)n.index===r.lastIndex&&r.lastIndex++,n.forEach((t,e)=>{i[e]=t});let s=i[1],o=i[2],u=i[3];if(!s||!o||!u)return!1;switch("true"==u&&(u=!0),"false"==u&&(u=!1),/^\d+$/.test(u)&&(u=parseInt(u)),o){case"~":return e[s].includes(u);case"=":case"==":return e[s]==u;case"===":return e[s]===u;case"!=":return e[s]!=u;case"!==":return e[s]!==u;case"<":return e[s]<u;case"<=":return e[s]<=u;case">":return e[s]>u;case">=":return e[s]>=u;default:return!1}}(o,e),s.push(o))}return i.includes("&&")?!s.includes(!1):!!s.includes(!0)}function e(i){if(!i||"*"===i)return new a(this.items);if(i&&"string"!=typeof i&&"array"!=typeof i)throw new Error("JQL: .select() is invalid");var r=[],s={},o={};"string"==typeof i&&(i=i.split(/[\s,]+/)?i.split(/[\s,]+/):[i]);for(let e=0,n=0;e<this.items.length;e++){var u=this.items[e];for(let t=0;t<i.length;t++){for(var l in u)l==i[t]&&(o[l]=this.items[e][l],s[n]={...o});t==i.length-1&&(r[n]=s[n],n++)}}return new a(r)}function n(t){if(!t)throw new Error("WHERE: Is invalid");for(var e=[],n=0;n<this.items.length;n++)("string"==typeof t?i(t,this.items[n]):t(this.items[n]))&&e.push(this.items[n]);return new a(e)}function r(){return this.items}function s(){return this.length}function o(t=!1){console.dir(this.items,t)}function c(t=!0){"boolean"==typeof t&&t?console.log(this.items):console.log(this)}function h(t=!1){console.table(this.items,t)}return function(t){return new a(t)}});