const m="margin: -4px 0 -3px; padding: 6px 15px; background: rgb(15,70,150); color: white; border: 1px solid #555;",a=10,t=["~","~~","=","==","===","!=","!==","<",">","<=",">="],e=["&&","||"],i=t.map(function(t){return"\\"+t}).join("|"),n=e.map(function(t){return"\\"+t}).join("|"),f=`(\\w+) (${i}) (\\w+)`,g=`(?:${f})*(${n})*`;!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.JQL=e()}(this,function(){function h(t){if(!(t&&t instanceof Array))throw new Error("JQL: Invalid array");return this.items=t,this.length=t.length,this.select=e,this.where=i,this.limit=s,this.data=o,this.array=o,this.result=o,this.count=r,this.log=u,this.table=c,this.dir=l,this}function n(t,e){if(!t&&"string"!=typeof t||!e)return!1;let i,n=[];const s=new RegExp(g,"gm");for(;i=s.exec(t);)i.index===s.lastIndex&&s.lastIndex++,i[0]&&n.push(i[0]);let o=[];for(let t=0;t<n.length;t++){var r=n[t];2<r.length&&o.push(function(t,e){let i,n=[];const s=new RegExp(f,"gm");for(;null!==(i=s.exec(t));)i.index===s.lastIndex&&s.lastIndex++,i.forEach((t,e)=>{n[e]=t});let o=n[1],r=n[2],l=n[3];if(!o||!r||!l)return!1;switch("null"==l&&(l=null),"true"==l&&(l=!0),"false"==l&&(l=!1),/^\d+$/.test(l)&&(l=parseInt(l)),/^\d.\d+$/.test(l)&&(l=parseFloat(l)),r){case"~":return e[o].includes(l);case"=":case"==":return e[o]==l;case"===":return e[o]===l;case"!=":return e[o]!=l;case"!==":return e[o]!==l;case"<":return e[o]<l;case"<=":return e[o]<=l;case">":return e[o]>l;case">=":return e[o]>=l;default:return!1}}(r,e))}return n.includes("&&")?!o.includes(!1):!!o.includes(!0)}function e(n){if(!n||"*"===n)return new h(this.items);if(n&&"string"!=typeof n&&"array"!=typeof n)throw new Error("JQL: .select() is invalid");var s=[],o={},r={};"string"==typeof n&&(n=n.split(/[\s,]+/)?n.split(/[\s,]+/):[n]);for(let e=0,i=0;e<this.items.length;e++){var l=this.items[e];for(let t=0;t<n.length;t++){for(var u in l)u==n[t]&&(r[u]=this.items[e][u],o[i]={...r});t==n.length-1&&(s[i]=o[i],i++)}}return new h(s)}function i(t){if(!t)throw new Error("JQL: .where() Is invalid");for(var e=[],i=0;i<this.items.length;i++)("string"==typeof t?n(t,this.items[i]):t(this.items[i]))&&e.push(this.items[i]);return new h(e)}function s(t=!1){if(0==t||null==t)return new h(this.items);if(t&&t<0)throw new Error("Value must be greater or equals zero");for(var e=[],i=0;i<this.items.length;i++)e.push(this.items[i]);return new h(e.slice(0,t))}function o(){return this.items}function r(){return this.length}function l(t={}){var e;t.items=void 0===t.items||t.items,t.limit=void 0!==t.limit?t.limit:a,t.options=void 0!==t.options&&t.options,"boolean"==typeof t.items&&t.items?(e=t.limit<this.length?t.limit:this.length,console.group(`%c[JQL] Dir – Showing: ${e} of ${this.length} elements`,m),console.dir(this.limit(t.limit).items,t.options)):(console.group("%c[JQL] Dir – Constructor",m),console.log(this)),console.groupEnd()}function u(t={}){var e;t.items=void 0===t.items||t.items,t.limit=void 0!==t.limit?t.limit:a,"boolean"==typeof t.items&&t.items?(e=t.limit<this.length?t.limit:this.length,console.group(`%c[JQL] Log – Showing: ${e} of ${this.length} elements`,m),console.log(this.limit(t.limit).items)):(console.group("%c[JQL] Log – Constructor",m),console.log(this)),console.groupEnd()}function c(t={}){t.columns=void 0!==t.columns&&t.columns,t.limit=void 0!==t.limit?t.limit:a;var e=t.limit<this.length?t.limit:this.length;console.group(`%c[JQL] Table – Showing: ${e} of ${this.length} elements`,m),console.table(this.limit(t.limit).items,t.columns),console.groupEnd()}return function(t){return new h(t)}});